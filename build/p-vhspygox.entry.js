import{r as t,h as e,e as s}from"./p-b49b9ea2.js";const o=class{constructor(e){t(this,e),this.nav=document.querySelector("ion-nav"),this.authClient=new OktaAuth({clientId:"0oaziqh9phTKOd8vJ4x5",url:"https://dev-309363.okta.com",issuer:"default"})}componentWillLoad(){localStorage.getItem("okta_id_token")&&this.nav.push("/profile")}handleKeyDown(t){"Enter"===t.key&&this.login()}login(){let t=this.host.querySelectorAll("input");return this.authClient.signIn({username:t[0].value,password:t[1].value}).then(t=>{if("SUCCESS"===t.status)return this.authClient.token.getWithoutPrompt({responseType:"id_token",scopes:["openid","profile","email"],sessionToken:t.sessionToken,redirectUri:"https://stencil-app.timothepardieu.now.sh"}).then(t=>{localStorage.setItem("okta_id_token",JSON.stringify(t)),this.nav.push("app-profile")});throw`Unable to handle ${t.status} status code`}).fail((function(t){console.error(t)}))}render(){return e("form",{class:"app-auth"},e("div",{class:"form-item"},e("label",null,"Username:",e("input",{type:"text",name:"username",autocomplete:"username"}))),e("div",{class:"form-item"},e("label",null,"Password:",e("input",{type:"password",name:"password",autocomplete:"current-password"}))),e("div",{class:"form-actions"},e("button",{type:"button",onClick:()=>this.login()},"Login")))}get host(){return s(this)}static get style(){return".app-auth{width:30%;margin:2rem auto}.app-auth .form-item{padding:.25rem}.app-auth label{width:100%;font-size:1rem;color:#999}.app-auth label input{width:97%;border-radius:.25rem;font-size:1.5rem}.app-auth .form-actions{text-align:right}"}};export{o as app_auth};